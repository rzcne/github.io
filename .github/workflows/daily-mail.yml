name: Send Daily Email

on:
  # 方式1：手动触发 (推荐，每次你更新完文章，点一下按钮就发)
  workflow_dispatch:

  # 方式2：定时触发 (比如每天早上8点，注意是UTC时间，北京时间要+8)
  # schedule:
  #   - cron: '0 0 * * *' 

jobs:
  send-email:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code (下载代码)
        uses: actions/checkout@v3

      - name: Setup Node.js (安装Node环境)
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install dependencies (安装依赖)
        run: npm install

      - name: Run Send Script (运行发送脚本)
        env:
          # 把 GitHub 后台设置的密码传给脚本
          EMAIL_USER: ${{ secrets.EMAIL_USER }}
          EMAIL_PASS: ${{ secrets.EMAIL_PASS }}
        run: node send-email.js
